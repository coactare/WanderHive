<!-- PAGINATION START  -->


<!-- PAGINATION END  -->

<ng-container *ngIf="data$ | async as data">
    
        <div class="catalog-params-div">
            <div class="form-inline mt-2">
                <input (keyup.enter)="onSearch()" class="search-input" #search style="width:300px" placeholder="Search"
                    type="text">
                <button (click)="onSearch()" class="search-product-button">Search</button>
                <button (click)="onReset()" class="reset-product-search-button">Reset</button>
            </div>

            <div class="StyledPaginationdiv"
                *ngIf="this.totalCount && this.totalCount !== undefined && this.totalCount>0 && this.pageCount && this.pageCount !== undefined">
                <p>
                    Showing <span>{{ (currentPage - 1) * catalogParams.pageSize + 1 }}</span> to
                    <span>{{ currentPage === pageCount ? this.totalCount : currentPage * catalogParams.pageSize
                        }}</span>
                    of <span>{{ this.totalCount }}</span> results
                </p>

                <div class="Buttonsdiv">
                    <button (click)="prevPage()" [disabled]="currentPage === 1">
                        <i class="fa-solid fa-less-than"></i>

                        <i class="fa fa-chevron-left fa-1x"></i>
                    </button>
                    <button (click)="nextPage()" [disabled]="currentPage === pageCount">
                        <i class="fa fa-chevron-right fa-1x"></i>

                    </button>
                </div>
            </div>
        </div>
        <!-- <h1 *ngIf="data.selectDeleteActionResponse?.data">Item Deleted</h1> -->

        <div class="manage-catalog-header">
            <h2>Manage Catalog</h2>
            <div class="add-catalog-button-div">
                <button class="show-product-form-button" [routerLink]="['/add-catalog-item']"><i
                        style='padding-right: 1rem;' class="fa fa-plus fa-1x"></i>Add New Product</button>
            </div>
        </div>

        <mc-loading *ngIf="data.isLoading"></mc-loading>


        <table>
            <thead>
                <tr>
                    <th>Brand</th>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Summary</th>
                    <th class="td-trimmed">Description</th>
                    <th>Image</th>
                    <th>Price</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let item of data.catalog?.data">
                    <td>{{item.brands.name}}</td>
                    <td>{{item.types.name}}</td>
                    <td>{{item.name}}</td>
                    <td>{{item.summary}}</td>
                    <td class="td-trimmed">{{item.description}}</td>
                    <td><img accept="image/*" [src]="'data:image/jpeg;base64,' + item.image" alt="Base64 Image" /></td>

                    <td>{{item.price}}</td>
                    <td>
                        <div class="table-action-div">
                            <button style="color: #FFC107;" class="table-action-button"
                                [routerLink]="['/edit-catalog-item', item.id]">
                                <i class="fa fa-pencil fa-1x"></i>
                            </button>


                            <button style="color: #F44336;" class="table-action-button"
                                (click)="deleteCatalogItem(item.id)">
                                <i class="fa fa-trash fa-1x"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    
</ng-container>